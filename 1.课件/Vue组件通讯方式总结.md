# Vue2组件通讯方式总结

## 1.props

```javascript
适用场景:父子之间
	它可以实现父传子,也可以实现子传父
	所谓的父子关系,就说明当前两个组件之间,一定有结构嵌套
		在一个组件的template中,一定能看到另一个组件的组件标签
		
父传子:
	1.父组件在子组件的标签上,添加标签属性,并将需要传递的数据写在属性值中
	2.子组件在自己的配置对象上,书写props规则,用于声明需要接收的标签属性以及对应的值
	
子传父:
	其实就是数据在子组件,父组件想要接收
	1.父组件还是通过子组件的标签,给子组件添加标签属性,属性值是一个接收数据的函数
	2.子组件在自己的配置对象中,添加props规则,接收父组件传下来的函数
	3.子组件调用接收到的函数,并向函数内部传入数据
		最终被函数的形参接收,父组件就可以使用该数据
		
	注意点:
		1.请问父组件接收数据的函数,一定要写在methods中吗?
		回答:必须写在methods中
			原因:因为写在methods中的函数,他们的this都会被强行修改为当前组件的实例对象
				如果不写在methods中,那么该函数的this就会随着使用者而发生变化
				
				原理:其实只要放在methods中的函数,Vue底层都会对它们使用bind来强行修改this指向
					顺便说一下,bind函数修改过的this指向,无法二次修改
		
 总结:
	父传子,父组件传的是真正的数据
	子传父,父组件传的是接收数据的函数
```

## 2.provide/inject

```
适用场景:祖孙之间

	基础流程:
		1.在祖先组件的配置对象中,添加provide配置属性,属性值可以是对象||函数
			将需要暴露的数据写在内部
		2.在后代组件的配置对象中,添加inject配置属性,属性值是Array<string>
			内部的字符串代表着需要接收的数据名称,与流程1中的属性名对应
			
	注意:
		1.如果provide暴露的数据,想要是data中的某个数据,那么就只能使用函数写法
			原因:provide函数,会在data函数执行之后才会执行,此时当前组件的this就已经创建了
	
		2.该方案可以实现祖先向后代组件传数据,也可以实现后代组件向祖先组件传递数据
			如果想要实现后代组件向祖先组件传递数据
				必须满足三个条件:
					1.必须在祖先组件的data中声明一个对象
					2.必须通过provide函数暴露这个对象
					3.后代组件只能修改对象中的属性
	
```

## 3.自定义事件

```
适用场景:父子之间(单向,子向父)

问题:什么是事件?
回答:事件指的是在程序运行过程中,发生的事情或者发生操作
	例如click事件
		用户可能会点击某个按钮,那么就会触发这个按钮的click事件
		
问题:事件组成三要素?
	1.事件源
	2.事件名(事件类型)
	3.事件处理器(又称为事件监听,事件回调函数)
	
问题:请问Vue中事件分为几类?
回答:
	1.原生事件
	2.自定义事件
	
问题:请问什么是原生事件?什么是自定义事件?
回答:
	原生事件
		原生事件是由W3C推出的一套事件机制
		一个标签具有哪些原生事件,都是W3C机构指定的,我们开发者无法修改
		绑定语法:
			1.使用@符号可以绑定
			2.onclick或者addEventListener('click')
			3.在组件标签上使用@并配合.native修饰符,来给组件的根节点绑定原生事件
			
		触发:
			由于事件是W3C推出,浏览器负责实现的,所以事件的触发由浏览器负责
		
	自定义事件
		自定义事件是由Vue退出的一套事件机制
		一个组件具有哪些自定义事件,都是开发者可以随意取名的
		绑定语法:
			1.使用@符号可以绑定
			2.可以通过this.$on语法绑定
		触发:
			由于事件是Vue推出的,事件名是开发者自己自定义的,所以事件的触发由开发者自己触发
				语法:this.$emit(事件名称,数据)
		
	无论是原生事件还是自定义事件,在Vue中,都可以使用@绑定事件
	
问题:如何区分一个事件是原生事件,还是自定义事件?
回答:
	如果一个事件绑定在原生html标签上,那么这个事件就是原生事件
	如果一个事件绑定在组件标签上,那么这个事件就是自定义事件
	
	
进阶:
	1.v-model指令
		它具有两种使用方式
			1.对input框使用
				原理:
					1.将data中某个数据的值,作为input框的默认值进行展示
						<input type="text" :value="msg">
						
					2.当用户修改输入框时,Vue会自动修改data中对应的状态数据
						拆解:
							1.如何知道用户有没有修改输入框?
								肯定和事件监听有关
								事件源:输入框
								事件名:input(Vue默认选择)
									input事件代表内容发生变化就会触发
									change事件代表失去焦点才会触发
							2.自动修改data中对应的状态数据
								获取到输入框最新结果,然后更新给data
								问题:如何获取到输入框的最新结果?
								回答:通过event.target.value可以获取到最新结果
								
			2.对组件标签使用(双向数据传递)
					1.将data中某个数据的值,作为组件标签的标签属性传递下去(默认标签属性名:value)
    					<Child1 :value="msg"></Child1>
    					
					2.父组件还会给子组件绑定自定义事件(默认事件名:input)
    					<Child1 :value="msg" @input="(data)=>msg=data"></Child1>
    					
    				扩展:
    					1.model属性可以实现对v-model指令.默认属性名和事件名的自定义效果
```

